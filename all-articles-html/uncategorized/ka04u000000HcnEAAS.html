<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotfix: SIEntManager_4.1.0.599_SI-3362</title>
    <meta name="article-id" content="ka04u000000HcnEAAS">
    <meta name="articlecaseattachcount" content="0">
    <meta name="articlecreatedbyid" content="0054u000006god6AAA">
    <meta name="articlecreateddate" content="2022-02-01T18:20:25.000Z">
    <meta name="articlenumber" content="000006557">
    <meta name="createdbyid" content="0054u000006god6AAA">
    <meta name="createddate" content="2023-05-08T10:06:57.000Z">
    <meta name="firstpublisheddate" content="2022-02-01T18:20:25.000Z">
    <meta name="islatestversion" content="true">
    <meta name="knowledgearticleid" content="kA04u0000000IR3CAM">
    <meta name="knowledge-article-id" content="kA04u0000000IR3CAM">
    <meta name="lastmodifiedbyid" content="0054u000006gSmgAAE">
    <meta name="lastmodifieddate" content="2023-05-08T10:06:57.000Z">
    <meta name="lastpublisheddate" content="2022-02-01T18:20:25.000Z">
    <meta name="meta-description" content="360008877892">
    <meta name="meta-title" content="Hotfix: SIEntManager_4.1.0.599_SI-3362">
    <meta name="ownerid" content="0054u000006god6AAA">
    <meta name="recordtypeid" content="0124u000000UUgLAAW">
    <meta name="urlname" content="6557">
    <meta name="versionnumber" content="1">
    <meta name="website-url" content="&lt;a href=&quot;https://helpcenter.netwrix.com/bundle/z-kb-articles-salesforce/page/kA04u0000000IR3CAM.html&quot; target=&quot;_blank&quot;&gt;Open in a new window&lt;/a&gt;">
</head>
<body>
    <h1>Hotfix: SIEntManager_4.1.0.599_SI-3362</h1>
    <p><strong><span class="wysiwyg-font-size-large">Summary:</span></strong> Database maintenance does not open in the Windows 32bit console</p><p><strong><span class="wysiwyg-font-size-large">Issue:</span></strong> <strong><span style="font-family: calibri,sans-serif;">Summary: �</span></strong>database maintenance does not open in the Windows 32bit console<br><strong><span style="font-family: calibri,sans-serif;">Before fix</span></strong><b>:</b><br>General problem description:<br>In AWS environment even master user is very limited from permissions perspective.<br>So, we have problem with accessing different stored procedures and system tables.<br>Problem 1:<br>Neither master nor simple user has rights to query sysjobs table.<br>Solution: use sysjobs_view<br>Problem 2:<br>Neither master nor simple user has rights to query sysjobhistory table.<br>Solution: use sp_help_jobhistory<br>Problem 3:<br>Neither master nor simple user has rights to query sysjobactivity table.<br>Solution: use sp_help_jobactivity<br>Problem 3:<br>Neither master nor simple user has rights to query sysjobactivity table.<br>Solution: use sp_help_jobactivity<br>Problem 4:<br>Simple user doesn&#39;t have enough rights for NVMonitorData Db.<br>Solution: give these rights<br>� sp_addrolemember &#39;db_datareader&#39;<br>� sp_addrolemember &#39;db_datawriter&#39;<br>� GRANT ALTER ON SCHEMA::dbo<br>� grant create procedure<br>� GRANT EXECUTE<br>�<br>Problem 5:<br>Simple user doesn&#39;t have enough rights for NVMonitorConfig Db.<br>Solution: give these rights<br>� sp_addrolemember &#39;db_datareader&#39;<br>� sp_addrolemember &#39;db_datawriter&#39;<br>�<br>Problem 6:<br>Simple user doesn&#39;t have enough rights for configuring serer links and viewing server state.<br>Solution: give these rights<br>� GRANT ALTER ANY LINKED SERVER<br>� GRANT ALTER ANY LOGIN<br>� GRANT VIEW SERVER STATE<br>�<br>Problem 7:<br>Simple user doesn&#39;t have rights for viewing/configuring SQLAgent Jobs and viewing SQLAgent status.<br>Solution: give SQLAgentUserRole role<br>Problem 8:<br>Call of sp_delete_jobserve procedure throwing exception.<br>Solution:<br>� Since even this call reports an error it seems like in fact it is doing what we need. So, idea is just to suppress this error.<br>Problem 9:<br>Neither master nor simple user has rights to execute sp_UpdateStats.<br>Solution:<br>� Make this step optional in EM config file.<br>Problem 10:<br>Can&#39;t connect to configured remote server for Move operation.<br>Solution:<br>� Use master account in configuration dialog for remote server.<br>� Use internal AWS IP address instead of instance name.<br>� Configure AWS security group to allow access.<br>�<br><strong><span style="font-family: calibri,sans-serif;">After fix:</span></strong><br>�<br>Comment 1:<br>For skipping Update Stats step (see Problem #9) in DBMaintenance use &#39;skipUpdateStatsStep&#39; configuration option in the SIEnterpriseManager.exe.config file.<br>For this add the following line into &#39;appSettings&#39; section:<br>��� <br>�<br>Comment 2:<br>If DB Maintenance was configured previously using different account then previously created SQL Agent job must be manually deleted.<br>For this you must login into SQL Server Management Studio using previous account and delete &#39;SiDbMainJob&#39; job.<br>�<br>Comment 3:<br>In DB Maintenance &#39;Archive DB&#39; AWS RDB master user account must be specified or any other account which also can create new Database.<br>�<br>Comment 4:<br>Sample script to create new user is attached - createUser.sql<br>�<br>Comment 5:<br>Sample script to give required rights to existing user is attached - updateExistingUser.sql<br>�<br>Comment 6:<br>When using Archive DB (see Problem #10), connection parameters values depend from AWS configuration.<br>See this article which explains specific settings for each case:<br>https://aws.amazon.com/blogs/database/implement-linked-servers-with-amazon-rds-for-microsoft-sql-server/<br>In general, most likely you will need to set server by local IP address of you destination SQL Server RDS instance. And most likely additional configuration in the security groups of these two� instances will be required. To find local IP address of your AWS RDS SQL Server instance you can use the following SQL statement under maser user account:<br>SELECT�<br>�� CONNECTIONPROPERTY(&#39;net_transport&#39;) AS net_transport,<br>�� CONNECTIONPROPERTY(&#39;protocol_type&#39;) AS protocol_type,<br>�� CONNECTIONPROPERTY(&#39;auth_scheme&#39;) AS auth_scheme,<br>�� CONNECTIONPROPERTY(&#39;local_net_address&#39;) AS local_net_address,<br>�� CONNECTIONPROPERTY(&#39;local_tcp_port&#39;) AS local_tcp_port,<br>�� CONNECTIONPROPERTY(&#39;client_net_address&#39;) AS client_net_address<br>�</p><p><strong><span class="wysiwyg-font-size-large">Instructions:</span></strong> 1. Stop SIEnterpriseManager service<br>2. Extract attached archive to the C:\Program Files (x86)\STEALTHbits\StealthINTERCEPT\SIEnterpriseManager folder<br>3. Start SIEnterpriseManager service<br><br><a href="http://downloads.stealthbits.com/access/files/SIHotFixes/SI4.1.0/SIEntManager_4.1.0.599_SI-3362.ZIP" target="_blank">http://downloads.stealthbits.com/access/files/SIHotFixes/SI4.1.0/SIEntManager_4.1.0.599_SI-3362.ZIP</a></p><p><strong><span class="wysiwyg-font-size-large">Product:</span></strong> StealthINTERCEPT<br><strong><span class="wysiwyg-font-size-large">Module:</span></strong> SI - Enterprise Manager<br><strong><span class="wysiwyg-font-size-large">Versions:</span></strong> 4.1.0<br><strong><span class="wysiwyg-font-size-large">Dev Ticket:</span></strong> SI-3362<br><strong><span class="wysiwyg-font-size-large">Resolved In:</span></strong> 4.1.0.599<br><strong><span class="wysiwyg-font-size-large">Salesforce Article ID:</span></strong> 000001663<br></p>
</body>
</html>