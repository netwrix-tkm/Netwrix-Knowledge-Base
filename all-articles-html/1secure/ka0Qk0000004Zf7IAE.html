<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1Secure ? Analyze AgentCore Node</title>
    <meta name="article-id" content="ka0Qk0000004Zf7IAE">
    <meta name="articlecaseattachcount" content="0">
    <meta name="articlecreatedbyid" content="0054u000008ic83AAA">
    <meta name="articlecreateddate" content="2024-04-17T13:30:54.000Z">
    <meta name="articlenumber" content="000009140">
    <meta name="confidence-level" content="Validated">
    <meta name="createdbyid" content="0054u000008ic83AAA">
    <meta name="createddate" content="2024-07-10T08:09:29.000Z">
    <meta name="firstpublisheddate" content="2024-04-17T14:05:43.000Z">
    <meta name="islatestversion" content="true">
    <meta name="knowledgearticleid" content="kA0Qk0000000byrKAA">
    <meta name="knowledge-article-id" content="kA0Qk0000000byrKAA">
    <meta name="lastmodifiedbyid" content="0054u000008ic83AAA">
    <meta name="lastmodifieddate" content="2024-07-10T08:09:45.000Z">
    <meta name="lastpublisheddate" content="2024-04-17T14:05:43.000Z">
    <meta name="meta-description" content="1Secure � Analyze Configuration.xml File">
    <meta name="meta-title" content="1Secure � Analyze Configuration.xml File">
    <meta name="ownerid" content="0054u000008ic83AAA">
    <meta name="recordtypeid" content="0124u000000UUgLAAW">
    <meta name="urlname" content="9140">
    <meta name="versionnumber" content="1">
    <meta name="website-url" content="&lt;a href=&quot;https://helpcenter.netwrix.com/bundle/z-kb-articles-salesforce/page/kA0Qk0000000byrKAA.html&quot; target=&quot;_blank&quot;&gt;Open in a new window&lt;/a&gt;">
</head>
<body>
    <h1>1Secure ? Analyze AgentCore Node</h1>
    <blockquote>
<p><span style="color: #2980b9;"><strong>NOTE: </strong></span> Return to the main workflow page via this link: <a href="https://helpcenter.netwrix.com/bundle/z-kb-articles-salesforce/page/kA0Qk0000000bxFKAQ.html" target="_self">1Secure Troubleshooting Workflow</a>.</p>

<p>Proceed to the next section via this link: <a href="https://helpcenter.netwrix.com/bundle/z-kb-articles-salesforce/page/kA0Qk0000000c0TKAQ.html" target="_self">1Secure ? Analyze ManagedObjects Node</a>.</p>
</blockquote>

<h2>Overview</h2>

<div>
<p>This article covers the <code>AgentCore</code> node legend in the 1Secure <code>Configuration.xml</code> file. This article also includes an example of the <code>AgentCore</code> node. Refer to the following <code>Configuration.xml</code> location:</p>

<pre class="has-inner-focus">
<code class="lang-Registry">C:\ProgramData\Netwrix Cloud Agent\AgentCore\ConfigServer</code></pre>
</div>

<h2>1. AgentCore legend</h2>

<div>
<p>The <code>AgentCore\MainSettings</code> node should contain the following subnodes:</p>

<ul><li>
	<p><code>ApiEndPoint</code>. A URL. The value is used to interact with the Cloud.</p>
	</li><li>
	<p><code>ClientSecret</code>. A unique key. The value is used for authorization in the Cloud.</p>
	</li><li>
	<p><code>ProviderReference</code>. A unique identifier of the agent.</p>
	</li><li>
	<p><code>TenancyReference</code>. A unique identifier of the organization where the agent is deployed.</p>
	</li></ul>

<p>The <code>AgentCore\Certificates</code> node should contain the following subnodes:</p>

<ul><li>
	<p><code>DER</code>. A public key of the agent. The key is used by the Cloud to encrypt credentials for this particular agent.</p>
	</li><li>
	<p><code>RSA</code>. A private key of the agent. The key is used by the agent to decrypt credentials received from the Cloud.</p>
	</li><li>
	<p><code>NeedToSend</code>. A flag. The value confirms the public DER key was successfully sent to the Cloud.</p>
	</li></ul>
</div>

<div>
<blockquote>
<p><span style="color: #ff0000;"><strong>IMPORTANT: </strong></span>If the <code>AgentCore</code> node misses any subnodes or values, run the Netwrix Cloud Agent Configuration tool. The tool is located in <code>C:\Program Files\Netwrix Cloud Agent\Agent Core\CloudAgentConfigTool.exe</code>.</p>

<ul><li>
	<p>The main tool screen looks as follows if there are no issues with the configuration file:</p>

	<div><img alt="image003.png" height="507" src="https://nwxcorp.file.force.com/servlet/rtaImage?eid=ka0Qk0000004Zf7&amp;feoid=00N0g000004CA0p&amp;refid=0EMQk000004IU2A" width="699"></img></div>
	</li><li>
	<p>The main tool screen looks as follows if either the <code>MainSettings</code> node is missing or the initial configuration has not been performed:</p>

	<div><img alt="image005.png" height="504" src="https://nwxcorp.file.force.com/servlet/rtaImage?eid=ka0Qk0000004Zf7&amp;feoid=00N0g000004CA0p&amp;refid=0EMQk000004IdNB" width="699"></img></div>
	</li><li>
	<p>The main tool screen looks as follows if there are issues in the Cloud connection:</p>

	<div><img alt="image007.png" height="504" src="https://nwxcorp.file.force.com/servlet/rtaImage?eid=ka0Qk0000004Zf7&amp;feoid=00N0g000004CA0p&amp;refid=0EMQk000004Ia4M" width="699"></img></div>

	<p>You can find the related logs in <code>C:\ProgramData\Netwrix Cloud Agent\Logs\CloudAgentCoreSvc\CloudAgentCore.log</code>.</p>
	</li></ul>
</blockquote>

<h2>1.1 CloudAgentCore.log usage</h2>

<p>The <code>CloudAgentCore.log</code> lines may include event descriptions. See examples below.</p>

<ul><li>
	<p>The server name or address could not be resolved. Check the internet connection in the host and DNS settings.</p>

	<pre class="has-inner-focus">
2023-07-05 12:03:10.9988312 | INFO | 6336  6196 | RestApiHandler.cpp:163
|   Exiting: NetwrixOverlord::RestApiHandler::StopThreads [0.064 ms] 
2023-07-05 12:03:43.1430323 | ERR  | 6336  6196 | RestApiHandler.cpp:61
|   Cloud authentication has failed. Error while sending a request. Error Code: 12007: The server name or address could not be resolved
.
2023-07-05 12:03:43.1430648 | ERR  | 6336  6196 | CloudAgentCoreService.cpp:129  | m_restApiClient-&gt;Authenticate() call failed. 
0x8004B005 Cloud authorization has failed. See application logs for more details [0x00007FFBAB797327,0x00007FFBAB796E56]; 
2023-07-05 12:03:43.1430902 | ERR  | 6336  6196 | CloudAgentCoreService.cpp:137  | NetwrixOverlord::CloudAgentCoreService::Initialize failed:
0x8004B005 Cloud authorization has failed. See application logs for more details [0x00007FFBAB797327,0x00007FFBAB796E56]</pre>
	</li><li>
	<p>The access is forbidden for this particular put configuration. It most likely means that the tenant is already served by some other agent. If you are certain that this is the correct agent, then re-enter the agent configuration in the Cloud Agent Configuration tool.</p>

	<pre class="has-inner-focus">
2023-07-05 12:14:28.8915749 | ERR  | 6440 65400 | AzureExceptions.h:34           | Status code: 403, reason: &quot;&quot;.
2023-07-05 12:14:28.8929019 | ERR  | 6440 65400 | RestApiHandler.cpp:61          | Cloud authentication has failed. 
2023-07-05 12:14:28.8934781 | ERR  | 6440 65400 | CloudAgentCoreService.cpp:129  | m_restApiClient-&gt;Authenticate()	call failed. 
0x8004B005 Cloud authorization has failed. See application logs for more details [0x00007FFBAB797327,0x00007FFBAB796E56]; 
2023-07-05 12:14:28.8935318 | ERR  | 6440 65400 | CloudAgentCoreService.cpp:137  | NetwrixOverlord::CloudAgentCoreService::Initialize failed: 
0x8004B005 Cloud authorization has failed. See application logs for more details [0x00007FFBAB797327,0x00007FFBAB796E56]</pre>
	</li></ul>
</div>

<h2>1.2 Configuration.xml example</h2>

<div>
<p>The <code>Configuration.xml</code> is located in <code>C:\ProgramData\Netwrix Cloud Agent\AgentCore\ConfigServer</code>. Refer to the following code block for a structure reference:</p>

<pre class="has-inner-focus">
<code class="lang-Registry">&lt;nr&gt;
    &lt;n n=&quot;\AgentCore&quot;&gt;
        &lt;n n=&quot;MainSettings&quot;&gt;
            &lt;n n=&quot;Authentication&quot; t=&quot;Authentication&quot;&gt;
                &lt;a n=&quot;ApiEndPoint&quot; v=&quot;�&quot;/&gt;
                &lt;a n=&quot;ClientSecret&quot; t=&quot;12&quot; v=&quot;HEX:�&quot;/&gt;
                &lt;a n=&quot;ProviderReference&quot; v=&quot;�&quot;/&gt;
                &lt;a n=&quot;TenancyReference&quot; v=&quot;�&quot;/&gt;
            &lt;/n&gt;
            &lt;n n=&quot;Certificates&quot; t=&quot;Certificates&quot;&gt;
                &lt;a n=&quot;DER&quot; v=&quot;�&quot;/&gt;
                &lt;a n=&quot;NeedToSend&quot; t=&quot;7&quot; v=&quot;False&quot;/&gt;
                &lt;a n=&quot;RSA&quot; t=&quot;12&quot; v=&quot;HEX:�&quot;/&gt;
            &lt;/n&gt;
        &lt;/n&gt;
    &lt;/n&gt;
    &lt;n n=&quot;\AuditArchive&quot;&gt;
        �
    &lt;/n&gt;
    &lt;n n=&quot;\LicenseUsage&quot;&gt;
        &lt;n n=&quot;da7c0b3d-63ad-ff26-fe75-ac0712a1835d&quot;&gt;
            &lt;n n=&quot;1019cf83-51ba-4ca8-a869-415fbbcccc0b&quot;&gt;
                &lt;n n=&quot;Active Directory users&quot; t=&quot;LicenseCounter&quot;&gt;
                    &lt;a n=&quot;CounterName&quot; t=&quot;2&quot; v=&quot;Active Directory users&quot;/&gt;
                    &lt;a n=&quot;ExcludeCount&quot; t=&quot;3&quot; v=&quot;0&quot;/&gt;
                    &lt;a n=&quot;LicenseCount&quot; t=&quot;12&quot; v=&quot;HEX:� &quot;/&gt;
                    &lt;a n=&quot;Reference&quot; t=&quot;2&quot; v=&quot;�&quot;/&gt;
                &lt;/n&gt;
            &lt;/n&gt;
        &lt;/n&gt;
    &lt;/n&gt;
    &lt;n n=&quot;\MSP&quot;&gt;
        �
    &lt;/n&gt;
    &lt;n n=&quot;\NetwrixAuditor&quot;&gt;
        &lt;n n=&quot;CommonSettings&quot;&gt;	�	
        &lt;n n=&quot;MetaInformation&quot;&gt;	�	
        &lt;n n=&quot;ManagedObjects&quot;&gt;
            &lt;n n=&quot;fbe25b03-18fb-4267-add2-fe3afabf7cc7&quot; t=&quot;ManagedObject&quot;&gt;
                �
            &lt;/n&gt;
            &lt;n n=&quot;ce354ab6-6a46-41e5-b590-788e4b20a64c&quot; t=&quot;ManagedObject&quot;&gt;
                �
            &lt;/n&gt;
        &lt;/n&gt;
    &lt;/n&gt;
    &lt;n n=&quot;\Templates&quot;&gt;
        �
    &lt;/n&gt;
&lt;/nr&gt;</code></pre>
</div>

<h2>Related articles</h2>

<div>
<ul><li>
	<p><a href="https://helpcenter.netwrix.com/bundle/z-kb-articles-salesforce/page/kA0Qk0000000bxFKAQ.html" target="_self">1Secure Troubleshooting Workflow</a></p>
	</li><li>
	<p><a href="https://helpcenter.netwrix.com/bundle/z-kb-articles-salesforce/page/kA0Qk0000000c0TKAQ.html" target="_self">1Secure ? Analyze ManagedObjects Node</a></p>
	</li></ul>
</div>
</body>
</html>