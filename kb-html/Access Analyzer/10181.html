<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CreateSchema Error: dbo.SA_FSAA_Resources.ID is not the same data type as referencing column</title>
    <meta name="visibility" content="employees_v">
    <meta name="visibility" content="partners_v">
    <meta name="visibility" content="customers_v">
    <meta name="content_type" content="ct_howto">
    <meta name="content_type" content="ct_troubleshooting">
    <meta name="product" content="enterprise_auditor">
    <meta name="ArticleCaseAttachCount" content="0">
    <meta name="ArticleCreatedById" content="0054u000007MiY9AAK">
    <meta name="ArticleCreatedDate" content="2025-05-06T16:51:52.000Z">
    <meta name="Article_Drafts_Folder__c" content="https://nwxcorp.sharepoint.com/sites/TechnicalSupportOperations/Shared%20Documents/Technical%20Knowledge%20Management/Salesforce%20Knowledge%20Drafts/kA0Qk0000002RLtKAM">
    <meta name="Article_Reviewer__c" content="nan">
    <meta name="Article_SME__c" content="nan">
    <meta name="Article_Version_Origin__c" content="nan">
    <meta name="Asana_Task_URL__c" content="nan">
    <meta name="AssignedById" content="0054u000007MiY9AAK">
    <meta name="AssignedToId" content="0054u000007MiY9AAK">
    <meta name="AssignmentDate" content="2025-05-06T16:51:52.000Z">
    <meta name="AssignmentDueDate" content="nan">
    <meta name="AssignmentNote" content="nan">
    <meta name="Case__c" content="nan">
    <meta name="Confidence_Level__c" content="nan">
    <meta name="CreatedById" content="0054u000007MiY9AAK">
    <meta name="CreatedDate" content="2025-05-06T16:51:52.000Z">
    <meta name="Draft_Status__c" content="Awaiting TKM">
    <meta name="FirstPublishedDate" content="nan">
    <meta name="IsLatestVersion" content="True">
    <meta name="KnowledgeArticleId" content="kA0Qk0000002RLtKAM">
    <meta name="Knowledge_Article_ID__c" content="kA0Qk0000002RLtKAM">
    <meta name="LastModifiedById" content="0054u000007MiY9AAK">
    <meta name="LastModifiedDate" content="2025-05-06T17:00:13.000Z">
    <meta name="LastPublishedDate" content="nan">
    <meta name="Meta_Description__c" content="nan">
    <meta name="Meta_Title__c" content="nan">
    <meta name="OwnerId" content="0054u000007MiY9AAK">
    <meta name="PublishStatus" content="Draft">
    <meta name="RecordTypeId" content="0124u000000UUgLAAW">
    <meta name="UrlName" content="10181">
    <meta name="VersionNumber" content="0">
    <meta name="Website_URL__c" content="&lt;a href=&quot;https://helpcenter.netwrix.com/bundle/z-kb-articles-salesforce/page/kA0Qk0000002RLtKAM.html&quot; target=&quot;_blank&quot;&gt;Open in a new window&lt;/a&gt;">
</head>
<body>
    <h1>CreateSchema Error: dbo.SA_FSAA_Resources.ID is not the same data type as referencing column</h1>
    <blockquote>
<p><span class="Caution"><strong>IMPORTANT: </strong></span>This is a work-in-progress article. The product R&amp;D team has yet to review some or all of the information below.</p>
</blockquote>
<h2>Symptom</h2>
<p>When running the File System, 0.CreateSchema job in Netwrix Access Analyzer (NAA), the job fails with the following errors:</p>
<ul><li>
<p dir="auto"><code>Column dbo.SA_FSAA_Resources.ID is not the same data type as referencing column SA_FSAA_AzureFilesShares_ResourceID. Could not create constraint or index.</code></p>
</li><li>
<p dir="auto"><code>Foreign key FK_SA_FSAA_AzureFilesShareProperties_AzureShareID references invalid table dbo.SA_FSAA_AzureFileShares. Could not create constraint or index.</code></p>
</li><li>
<p dir="auto"><code>Column dbo.SA_FSAA_Resources.ID is not the same data type as referencing column SA_FSAA_ResourceMap_ID in foreign key FK_SA_FSAA_ResourceMap_ID. Could not create constraint or index.</code></p>
</li><li>
<p dir="auto"><code>Column dbo.SA_FSAA_Resources.ID is not the same data type as referencing column SA_FSAA_ResourcesScanTypeDetails.ID in foreign key FK_SA_FSAA_ResourcesScanTypeDetails_ID. Could not create constraint or index.</code></p>
</li><li>
<p dir="auto"><code>Invalid object name dbo.SA_FSAA_ResourceMap.
</code></p>
</li></ul>
<pre class="has-inner-focus"></pre>
<h2>Cause</h2>
<p>These errors may be caused by any one of the following causes:</p>
<ul><li>The Netwrix Access Analyzer (NAA) database was originally created pre-StealthAUDIT v10.0.</li><li>
<p dir="auto">The ID column of the SA_FSAA_Resources table has a data type of int instead of bigint.</p>
</li></ul>
<h2>Resolutions</h2>
<p>To address these causes, refer to the following steps.</p>
<ol><li>
<p>In the NAA Database, run the following SQL Script:</p>
<pre class="language-markup" style="background: #efefef;padding: 8px;display: block;border: 1px solid rgb(204, 204, 204);overflow-x: auto;"><code>SELECT 
    t.name AS TableName,
    c.name AS ColumnName,
    tp.name AS DataType,
    CASE 
        WHEN tp.name = &#39;bigint&#39; THEN &#39;FS_MigrateSchema job not needed.&#39;
        WHEN tp.name = &#39;int&#39; THEN &#39;Run FS_MigrateSchema job from InstantJobs before running 0.CreateSchema job.&#39;
        ELSE &#39;Unknown data type.&#39;
    END AS ActionMessage
FROM 
    sys.tables AS t
INNER JOIN 
    sys.columns AS c ON t.object_id = c.object_id
INNER JOIN 
    sys.types AS tp ON c.user_type_id = tp.user_type_id
WHERE 
    t.name = &#39;SA_FSAA_Resources&#39; AND 
    c.name = &#39;ID&#39; AND
    tp.name IN (&#39;int&#39;, &#39;bigint&#39;)
ORDER BY 
    t.name, c.name;</code></pre>
</li><li>If the script result says &quot;Run FS_MigrateSchema job from InstantJobs before running 0.CreateSchema job.&quot; open the NAA console and add the FS_MigrateSchema job from the InstantJob Library.<br><blockquote><strong>NOTE:</strong> For more information on pulling jobs from the InstantJob library, please visit the Netwrix HelpCenter: <a class="use-hover-preview" href="https://helpcenter.netwrix.com/bundle/AccessAnalyzer_12.0/page/Content/EnterpriseAuditor/Admin/Jobs/InstantJobs/Overview.htm" target="_blank">https://helpcenter.netwrix.com/bundle/AccessAnalyzer_12.0/page/Content/EnterpriseAuditor/Admin/Jobs/InstantJobs/Overview.htm</a></blockquote>
</li><li>Configure the job with the runtime details below:<br><blockquote><strong>NOTE:</strong> For more information on the FS_MigrateSchema job, please visit the Netwrix HelpCenter: <a href="https://helpcenter.netwrix.com/bundle/AccessAnalyzer_12.0/page/Content/EnterpriseAuditor/Admin/Jobs/InstantJobs/FS_MigrateSchema.htm" target="_blank">https://helpcenter.netwrix.com/bundle/AccessAnalyzer_12.0/page/Content/EnterpriseAuditor/Admin/Jobs/InstantJobs/FS_MigrateSchema.htm</a></blockquote>
<strong></strong>
<ol><li><strong>Hosts</strong>: localhost.</li><li><strong>Connection Profile</strong>: Account with DBO permissions on NAA database.<br><br></li></ol>
</li><li>Create a scheduled task for the FS_MigrateSchema job with the below criteria:
<ol><li>No Schedule/Trigger</li><li>&quot;Stop the task if it runs for&quot; option unchecked.<br><br></li></ol>
</li><li>From the Schedules, right-click the FS_MigrateSchema scheduled task and select <strong>Run</strong>.</li></ol>
</body>
</html>