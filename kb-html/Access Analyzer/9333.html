<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using the AADI_RegisterAzureAppAuth Job to Create the Modern Auth Connection Profile for Entra ID</title>
    <meta name="content_type" content="ct_howto">
    <meta name="content_type" content="ct_installupgrade">
    <meta name="former_brand" content="f_stealthbits">
    <meta name="product" content="enterprise_auditor">
    <meta name="ArticleCaseAttachCount" content="0">
    <meta name="ArticleCreatedById" content="005Qk00000276ifIAA">
    <meta name="ArticleCreatedDate" content="2024-11-22T18:26:22.000Z">
    <meta name="Article_Drafts_Folder__c" content="https://nwxcorp.sharepoint.com/sites/TechnicalSupportOperations/Shared%20Documents/Technical%20Knowledge%20Management/Salesforce%20Knowledge%20Drafts/kA0Qk0000001j4jKAA">
    <meta name="Article_Reviewer__c" content="005Qk000001wMM9IAM">
    <meta name="Article_SME__c" content="0054u000006gpoAAAQ">
    <meta name="Article_Version_Origin__c" content="nan">
    <meta name="Asana_Task_URL__c" content="nan">
    <meta name="AssignedById" content="nan">
    <meta name="AssignedToId" content="nan">
    <meta name="AssignmentDate" content="nan">
    <meta name="AssignmentDueDate" content="nan">
    <meta name="AssignmentNote" content="nan">
    <meta name="Case__c" content="nan">
    <meta name="Confidence_Level__c" content="Not Validated">
    <meta name="CreatedById" content="005Qk00000276ifIAA">
    <meta name="CreatedDate" content="2025-04-30T01:11:23.000Z">
    <meta name="Draft_Status__c" content="Ready to Publish">
    <meta name="FirstPublishedDate" content="2024-12-30T21:33:48.000Z">
    <meta name="IsLatestVersion" content="True">
    <meta name="KnowledgeArticleId" content="kA0Qk0000001j4jKAA">
    <meta name="Knowledge_Article_ID__c" content="kA0Qk0000001j4jKAA">
    <meta name="LastModifiedById" content="005Qk000001wMM9IAM">
    <meta name="LastModifiedDate" content="2025-05-01T18:55:32.000Z">
    <meta name="LastPublishedDate" content="2024-12-30T21:33:48.000Z">
    <meta name="Meta_Description__c" content="nan">
    <meta name="Meta_Title__c" content="NEA_AADI_RegisterAzureAppAuth_Job">
    <meta name="OwnerId" content="005Qk00000276ifIAA">
    <meta name="PublishStatus" content="Online">
    <meta name="RecordTypeId" content="0124u000000UUgLAAW">
    <meta name="UrlName" content="9333">
    <meta name="VersionNumber" content="1">
    <meta name="Website_URL__c" content="&lt;a href=&quot;https://helpcenter.netwrix.com/bundle/z-kb-articles-salesforce/page/kA0Qk0000001j4jKAA.html&quot; target=&quot;_blank&quot;&gt;Open in a new window&lt;/a&gt;">
</head>
<body>
    <h1>Using the AADI_RegisterAzureAppAuth Job to Create the Modern Auth Connection Profile for Entra ID</h1>
    <h2>Question</h2>
<div>
<p>How can you use the AADI_RegisterAzureAppAuth job to create the Modern Auth Connection Profile for Entra ID?</p>
</div>
<h2>Answer</h2>
<div>
<p>The <strong>AADI_RegisterAzureAppAuth</strong> job will register a Microsoft Entra ID (formerly Azure AD) application for authentication and provision appropriate permissions for Azure Active Directory Online scans.</p>
<p>It requires:</p>
<ul><li>
<p>A Connection Profile containing a Microsoft Entra ID Global Admin credential with an Account Type of <strong>Task (Local)</strong></p>
</li><li>
<p>An Azure AD PowerShell module to be installed on targeted hosts</p>
</li></ul>
<blockquote>
<p><span class="Note"><strong>NOTE: </strong></span>If the module is not already installed, the job will attempt to install it.</p>
</blockquote>
<p>Follow the steps below to configure and run the AADI_RegisterAzureAppAuth job.</p>
<blockquote>
<p><span class="Caution"><strong>IMPORTANT: </strong></span>You should have MS Edge set as your default browser.</p>
</blockquote>
<ul><li>
<p><a href="#create">Creating the AADI_RegisterAzureAppAuth Job</a></p>
</li><li>
<p><a href="#configure">Configuring the AADI_RegisterAzureAppAuth Job</a></p>
</li><li>
<p><a href="#finish">Finishing Set Up and Applying the New Connection Profile to the EntraID Inventory Job</a></p>
</li></ul>
<h4 id="create">Creating the AADI_RegisterAzureAppAuth Job</h4>
<ol><li>
<p>In Netwrix Access Analyzer, create a <strong>Z_RegisterAzureAppAuth Job Group</strong> or use any other Job Group in which you will place the AADI_RegisterAzureAppAuth job.</p>
</li><li>
<p>Click <strong>Add Instant Job</strong> to open the Instant Job Wizard.</p>
</li><li>
<p>To install the <strong>AADI_RegisterAzureAppAuth</strong> job from the Instant Job Library (under the <strong>Library Name: Azure</strong>), follow these steps:</p>
<ul><li>
<p>Right-click the <strong>Z_RegisterAzureAppAuth</strong> Job Group that you just created and select <strong>Add Instant Job</strong> and on the Instant Job step.</p>
</li><li>
<p>Expand the <strong>Library Name: Azure</strong> to select the <strong>AADI_RegisterAzureAppAuth</strong> instant job.</p>
</li><li>
<p>After installation, the job tree automatically refreshes with the new job available within the selected Job Group. See the <a href="https://helpcenter.netwrix.com/bundle/EnterpriseAuditor_11.6/page/Content/EnterpriseAuditor/Admin/Jobs/InstantJobs/Overview.htm" title="Instant Job Wizard" target="_blank">Instant Job Wizard</a> topic for additional information.</p>
</li></ul>
</li></ol>
<h4 id="configure">Configuring the AADI_RegisterAzureAppAuth Job</h4>
<ol><li>
<p>Navigate to the Configuration section of the job overview and description page, then select the E<strong>dit</strong> button for <strong>Name of the app as it will appear in the Azure applications list</strong>.</p>
</li><li>
<p>Enter the name that you want to apply to the registered Microsoft Entra ID application and click <strong>Save</strong>.</p>
</li><li>
<p>On the <strong>Configure &gt; Hosts</strong> node, select the target hosts.</p>
<blockquote>
<p><span class="Note"><strong>NOTE: </strong></span>The targeted host should be the <strong>Microsoft Entra tenant name</strong> (for example, myorg.onmicrosoft.com).</p>
</blockquote>
</li><li>
<p>Click <strong>Save</strong> and then the job should be ready to run.</p>
</li><li>
<p>Run the <strong>AADI_RegisterAzureAppAuth</strong> job.</p>
</li><li>
<p>After the job successfully runs, it opens a browser window to Microsoft Entra ID. Log in as a <strong>Global Administrator</strong>, and grant administrator consent to the <strong>Application&#39;s configured API Permissions</strong>.</p>
<blockquote>
<p><span class="Caution"><strong>IMPORTANT:</strong></span> If this log-in attempt fails or you close the browser, then you will need to manually log in to Microsoft Entra ID as a Global Administrator. Next, navigate to the Application&#39;s API Permissions to grant Admin Consent before the Application can be used for Azure Active Directory scans in Access Analyzer.</p>
</blockquote>
</li><li>
<p>The Microsoft Entra ID application is now provisioned with the necessary permissions for Azure Active Directory Inventory Online scans. There will be a new Connection Profile for this Application.</p>
</li></ol>
<h4 id="finish">Finishing Set Up and Applying the New Connection Profile to the EntraID Inventory Job</h4>
<ol><li>
<p>Restart the <strong>Access Analyzer Console</strong> and then review the results of the AADI_RegisterAzureAppAuth job.</p>
</li><li>
<p>Review the <strong>ClientID_(AppId) </strong>and<strong> Key_(Secret_Value)</strong> values, record them to a password vault or equivalent, and then return to the new connection profile previously created.Â </p>
</li><li>
<p>Confirm that the <strong>ClientID_(AppId) </strong>value matches the <strong>Client ID:</strong> value.</p>
</li><li>
<p>Then, enter the <strong>Key_(Secret_Value) </strong>in the<strong> Key </strong>value and click <strong>OK</strong> to save.</p>
</li><li>
<p>Once you have created and verified your <strong>&lt;EntraID&gt; connection</strong> and <strong>&lt;MYORG.MICROSOFT.COM&gt; EntraID host list</strong> under the global settings as a result of the process defined in this article, you can configure each of these parameters to run both the <strong>.Entra ID Inventory</strong> and <strong>Entra ID</strong> jobs.</p>
</li></ol>
<blockquote>
<p><span class="Caution"><strong>IMPORTANT:</strong></span> The required rights, roles, and configuration for Microsoft Entra ID Auditing will still need to be configured. See the <a href="https://helpcenter.netwrix.com/bundle/EnterpriseAuditor_11.6/page/Content/Config/EntraID/Access.htm" title="Microsoft Entra ID Auditing Configuration" target="_blank">Microsoft Entra ID Auditing Configuration</a> topic for additional information.</p>
</blockquote>
</div>
<h2>Related Articles</h2>
<ul><li><a href="https://helpcenter.netwrix.com/bundle/EnterpriseAuditor_11.6/page/Content/EnterpriseAuditor/Admin/Jobs/InstantJobs/Overview.htm" title="Instant Job Wizard" target="_blank">Instant Job Wizard</a></li><li><a href="https://helpcenter.netwrix.com/bundle/EnterpriseAuditor_11.6/page/Content/Config/EntraID/Access.htm" title="Microsoft Entra ID Auditing Configuration" target="_blank">Microsoft Entra ID Auditing Configuration</a></li></ul>
</body>
</html>