<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unable to Upload an Agent Installer Package to the Hub</title>
    <meta name="product" content="change_tracker">
    <meta name="ArticleCaseAttachCount" content="0">
    <meta name="ArticleCreatedById" content="0054u000006god6AAA">
    <meta name="ArticleCreatedDate" content="2022-02-07T00:41:38.000Z">
    <meta name="Article_Drafts_Folder__c" content="nan">
    <meta name="Article_Reviewer__c" content="nan">
    <meta name="Article_SME__c" content="nan">
    <meta name="Article_Version_Origin__c" content="nan">
    <meta name="Asana_Task_URL__c" content="nan">
    <meta name="AssignedById" content="nan">
    <meta name="AssignedToId" content="nan">
    <meta name="AssignmentDate" content="nan">
    <meta name="AssignmentDueDate" content="nan">
    <meta name="AssignmentNote" content="nan">
    <meta name="Case__c" content="nan">
    <meta name="Confidence_Level__c" content="nan">
    <meta name="CreatedById" content="0054u000006god6AAA">
    <meta name="CreatedDate" content="2023-12-15T10:29:29.000Z">
    <meta name="Draft_Status__c" content="nan">
    <meta name="FirstPublishedDate" content="2022-02-07T00:41:38.000Z">
    <meta name="IsLatestVersion" content="True">
    <meta name="KnowledgeArticleId" content="kA04u0000000JW0CAM">
    <meta name="Knowledge_Article_ID__c" content="kA04u0000000JW0CAM">
    <meta name="LastModifiedById" content="0054u000007Mj6zAAC">
    <meta name="LastModifiedDate" content="2023-12-15T10:30:04.000Z">
    <meta name="LastPublishedDate" content="2023-12-15T10:30:04.000Z">
    <meta name="Meta_Description__c" content="HELPDESK">
    <meta name="Meta_Title__c" content="Only NNT - Unable to upload a agent installer package to the hub">
    <meta name="OwnerId" content="0054u000006god6AAA">
    <meta name="PublishStatus" content="Online">
    <meta name="RecordTypeId" content="0124u000000UUgLAAW">
    <meta name="UrlName" content="8163">
    <meta name="VersionNumber" content="5">
    <meta name="Website_URL__c" content="&lt;a href=&quot;https://helpcenter.netwrix.com/bundle/z-kb-articles-salesforce/page/kA04u0000000JW0CAM.html&quot; target=&quot;_blank&quot;&gt;Open in a new window&lt;/a&gt;">
</head>
<body>
    <h1>Unable to Upload an Agent Installer Package to the Hub</h1>
    <p><br></p><p>Issue found on a Change Tracker 54 hub.<br> Installed on a Windows server.<br> .NET 4.6.1 Installed</p><p>Issue: Agent Software Updates Section is empty but the hub throws an error stating that &quot;There appears to be a software update of this version available already&quot;. Please remove that version before uploading this one.</p><p>Troubleshooting: Restarted IIS and cleared Hub cache. Issue was seen on 2 separate customer installs but I have been unable to replicate on my test system.</p><h2 id="OnlyNNT-Unabletouploadaagentinstallerpackagetothehub-Step-by-stepguide">Step-by-step guide</h2><p>This requires wiping the partial upload from the mongo fs.files and fs.chunks collections as follows (also described in an email previously):</p><p><strong>Recovering from a Botched Agent Update Upload by removing all updates from GridFS manually:</strong></p><p>The process for removing all the updates:</p><p>1. Find scheduled updates on groups via mongo, then remove them using the UI</p><p>&gt; use NNTHubService<br>&gt; db.SystemDirectory.find({ &quot;_t&quot; : <span class="error">[&quot;MongoMember&quot;, &quot;MongoGroupMember&quot;]</span>, &quot;GroupAgentUpdateSchedule&quot; : { $ne: null }},</p><p><span style="color: rgb(23,43,77);">{ &quot;DisplayName&quot; : 1 }</span></p><p>)</p><p>this will list any group names that have scheduled agent updates on them. <br><strong>Remove the updates from the listed groups using the UI</strong></p><p>2. Verify that there are some update zip files in mongo gridFS that need removing, this query lists them:</p><p>&gt; db.fs.files.find({ &quot;metadata.UpdateType&quot; :</p><p><span style="color: rgb(23,43,77);">{ $gt: 0 }</span></p><p>}).pretty()</p><p>3. Remove the file records and data from gridFS:<br>&gt; db.fs.files.remove({ &quot;metadata.UpdateType&quot; :</p><p><span style="color: rgb(23,43,77);">{ $gt: 0 }</span></p><p>})<br>&gt; db.fs.chunks.remove({ &quot;metadata.UpdateType&quot; :</p><p><span style="color: rgb(23,43,77);">{ $gt: 0 }</span></p><p>})</p><p>(<strong>NB</strong> the second may not be necessary but won&#39;t do any harm)</p><p>4. run the query from Step 2. <strong>It should now return no results</strong> indicating all the updates have been deleted</p><p>5. Restart IIS so that the Hub&#39;s cached idea of the available updates is refreshed</p><p> </p><p><br></p>
</body>
</html>