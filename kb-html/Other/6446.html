<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Access Analyzer Database Space Issues</title>
    <meta name="visibility" content="employees_v">
    <meta name="ArticleCaseAttachCount" content="0">
    <meta name="ArticleCreatedById" content="0054u000006god6AAA">
    <meta name="ArticleCreatedDate" content="2022-02-01T18:16:24.000Z">
    <meta name="Article_Drafts_Folder__c" content="https://nwxcorp.sharepoint.com/sites/TechnicalSupportOperations/Shared%20Documents/Technical%20Knowledge%20Management/Salesforce%20Knowledge%20Drafts/kA04u0000000ILKCA2">
    <meta name="Article_Reviewer__c" content="nan">
    <meta name="Article_SME__c" content="nan">
    <meta name="Article_Version_Origin__c" content="nan">
    <meta name="Asana_Task_URL__c" content="nan">
    <meta name="AssignedById" content="nan">
    <meta name="AssignedToId" content="nan">
    <meta name="AssignmentDate" content="nan">
    <meta name="AssignmentDueDate" content="nan">
    <meta name="AssignmentNote" content="nan">
    <meta name="Case__c" content="nan">
    <meta name="Confidence_Level__c" content="nan">
    <meta name="CreatedById" content="0054u000006god6AAA">
    <meta name="CreatedDate" content="2025-05-05T11:43:38.000Z">
    <meta name="Draft_Status__c" content="nan">
    <meta name="FirstPublishedDate" content="2022-02-01T18:16:25.000Z">
    <meta name="IsLatestVersion" content="True">
    <meta name="KnowledgeArticleId" content="kA04u0000000ILKCA2">
    <meta name="Knowledge_Article_ID__c" content="kA04u0000000ILKCA2">
    <meta name="LastModifiedById" content="0054u0000093LZ4AAM">
    <meta name="LastModifiedDate" content="2025-05-05T11:48:34.000Z">
    <meta name="LastPublishedDate" content="2022-02-01T18:16:25.000Z">
    <meta name="Meta_Description__c" content="360008408371">
    <meta name="Meta_Title__c" content="Access Analyzer Database Space Issues">
    <meta name="OwnerId" content="0054u000006god6AAA">
    <meta name="PublishStatus" content="Online">
    <meta name="RecordTypeId" content="0124u000000UUgLAAW">
    <meta name="UrlName" content="6446">
    <meta name="VersionNumber" content="1">
    <meta name="Website_URL__c" content="&lt;a href=&quot;https://helpcenter.netwrix.com/bundle/z-kb-articles-salesforce/page/kA04u0000000ILKCA2.html&quot; target=&quot;_blank&quot;&gt;Open in a new window&lt;/a&gt;">
</head>
<body>
    <h1>Access Analyzer Database Space Issues</h1>
    <p><strong><span class="wysiwyg-font-size-large">Issue:</span></strong> Access Analyzer can fill up a database or database transaction log.  It can be difficult to detect what jobs were running during this time.  The below scripts will help find what jobs were running and if there were any changes to run times.</p>
<p> </p>
<p>--confirm SQL Version and Edition <br>select @@version</p>
<p> </p>
<p>--get list of all jobs that have run <br>select distinct jobName from SA_JobStatsTbl</p>
<p> </p>
<p>--Find Job that detected the issue</p>
<p>--search for any messages indicating fullness (e.g., full transaction log, full tempdb). <br>--If you have a guess for which job caused the error, add it as a filter.</p>
<p>--gather the task or query that was running as part of the job in order to isolate likely issue</p>
<p>select top 100<br>JobRunTimeKey, <br>MessagetimeStamp, <br>JobName, <br>TableName, <br>TaskName, <br>[Message] <br>from dbo.SA_Messages with(nolock) <br>where message like &#39;%full%&#39;</p>
<p>--You may need to add some additional filters</p>
<p>and message not like &#39;%FullPath%&#39;<br>and message not like &#39;%full ADI%&#39;</p>
<p>order by MessageTimeStamp desc</p>
<p> </p>
<p>--Get detailed historical information about latest and previous runs of problematic jobs to understand if anything may have changed recently <br>select * from SA_JobStatsTbl <br>where JobName in (&#39;AD_DuplicateUsers&#39;, &#39;AD_GroupPolicy&#39;) <br>order by JobRunTimeKey</p>
<p> </p>
<p>--Get detailed historical information about latest and previous runs of problematic jobs and tasks to understand if anything may have changed recently <br>select * <br>from SA_JobTaskStatsTbl <br>where JobName in (&#39;AD_DuplicateUsers&#39;, &#39;AD_GroupPolicy&#39;) <br>order by StartTime</p>
<p> </p>
<p>--Identify what jobs were running</p>
<p>--Find other jobs that were running at the same time.  It is possible that multiple jobs were utilizing the tempdb\ transaction log at the same time or that two jobs interfered with each other </p>
<p>--You will need to update the start and end times from the script above</p>
<p>Declare @starttime Smalldatetime<br>Declare @Endtime Smalldatetime</p>
<p> </p>
<p>Set @starttime = &#39;2020-12-31 11:33:00&#39;<br>Set @Endtime = &#39;2020-12-31 12:33:34.000&#39;</p>
<p> </p>
<p>select * from SA_JobStatsTbl <br>where <br>--Job started before our job <br>([JobRunTimeKey] and [EndTime] &gt;= @starttime)<br>--Job started during our job<br>OR<br>([JobRunTimeKey] &gt;= @starttime<br>and [JobRunTimeKey] 
</p><p> </p>
<p> </p>
</body>
</html>