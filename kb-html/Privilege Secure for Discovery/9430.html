<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unable to login to NPS-D Web Interface after Patching Linux Nodes</title>
    <meta name="visibility" content="employees_v">
    <meta name="product" content="privilege_secure_discovery">
    <meta name="ArticleCaseAttachCount" content="0">
    <meta name="ArticleCreatedById" content="005Qk00000214EvIAI">
    <meta name="ArticleCreatedDate" content="2025-03-06T01:51:09.000Z">
    <meta name="Article_Drafts_Folder__c" content="nan">
    <meta name="Article_Reviewer__c" content="005Qk000001wMM9IAM">
    <meta name="Article_SME__c" content="nan">
    <meta name="Article_Version_Origin__c" content="nan">
    <meta name="Asana_Task_URL__c" content="https://app.asana.com/0/1203106155380297/1209707550564980">
    <meta name="AssignedById" content="005Qk00000214EvIAI">
    <meta name="AssignedToId" content="005Qk00000214EvIAI">
    <meta name="AssignmentDate" content="2025-03-06T01:51:09.000Z">
    <meta name="AssignmentDueDate" content="nan">
    <meta name="AssignmentNote" content="nan">
    <meta name="Case__c" content="500Qk00000MJbnCIAT">
    <meta name="Confidence_Level__c" content="Work In Progress">
    <meta name="CreatedById" content="005Qk00000214EvIAI">
    <meta name="CreatedDate" content="2025-03-06T01:51:09.000Z">
    <meta name="Draft_Status__c" content="Backlog">
    <meta name="FirstPublishedDate" content="nan">
    <meta name="IsLatestVersion" content="True">
    <meta name="KnowledgeArticleId" content="kA0Qk00000027LZKAY">
    <meta name="Knowledge_Article_ID__c" content="kA0Qk00000027LZKAY">
    <meta name="LastModifiedById" content="005Qk000001wMM9IAM">
    <meta name="LastModifiedDate" content="2025-03-18T14:23:34.000Z">
    <meta name="LastPublishedDate" content="nan">
    <meta name="Meta_Description__c" content="Unable to login on console">
    <meta name="Meta_Title__c" content="Unable to login on console">
    <meta name="OwnerId" content="005Qk00000214EvIAI">
    <meta name="PublishStatus" content="Draft">
    <meta name="RecordTypeId" content="0124u000000UUgLAAW">
    <meta name="UrlName" content="9430">
    <meta name="VersionNumber" content="0">
    <meta name="Website_URL__c" content="&lt;a href=&quot;https://helpcenter.netwrix.com/bundle/z-kb-articles-salesforce/page/kA0Qk00000027LZKAY.html&quot; target=&quot;_blank&quot;&gt;Open in a new window&lt;/a&gt;">
</head>
<body>
    <h1>Unable to login to NPS-D Web Interface after Patching Linux Nodes</h1>
    <p><strong>Symptom</strong><br>While doing regular patching of the Linux nodes hosting the NPS-D application, if you upgrade Docker Engine and Docker CLI to version 28.0.0, the NPS-D page became inaccessible.<br><br><strong>Resolution</strong><br>Upgrading from Docker 27.5.1 to 28.0.0 broke the internal networking of the docker containers as reported on various forms (https://github.com/moby/moby/issues/49511). To resolve this, we initiated a roll back using the following information/commands that resolved the issue:<br><br>Navigate to one of the REACHABLE nodes and run these commands:<br><br>sudo docker node update --availability drain <strong>NODE_NAME</strong> <em>#This is to ensure that node is removed from the Docker Swarm cluster</em><br>sudo systemctl stop docker <em>#Stop the Docker service</em><br>sudo apt purge docker-ce docker-ce-cli <em>#Uninstall the docker-ce and docker-ce-cli packages</em><br>sudo apt autoremove <em>#Remove any leftover data of removed packages</em><br>sudo apt-cache madison docker-ce <em>#Get the list of available docker-ce package</em><br>sudo apt install docker-ce=5:27.5.1-1~ubuntu.22.04~jammy <em>#select from earlier output and use it after &#39;sudo apt install docker-ce=&#39; part. The package is dependent on the version of Ubuntu OS installed on the node.</em><br>sudo apt-cache madison docker-ce-cli <em>#Get the list of available docker-ce-cli package</em><br>sudo apt install docker-ce-cli=5:27.5.1-1~ubuntu.22.04~jammy <em>#select from earlier output and use it after &#39;sudo apt install docker-ce-cli=&#39; part. The package is dependent on the version of Ubuntu OS installed on the node.</em><br>sudo systemctl status docker <em>#Check status of Docker services</em><br>s1 status <em>#check status of NPS-D services</em><br>s1 nodes <em>#check status of NPS-D nodes</em><br>sudo docker node update --availability active <strong>NODE_NAME</strong> <em>#Make the node member of Docker swarm cluster back</em><br><br>NOTE: It must be noted that for the node with <strong>LEADER</strong> status, after running the above set of commands, the following command should be executed from a node other than the LEADER itself:<br><br>HNupg=<strong>LEADER_NODE</strong>; sudo docker node demote $HNupg; sleep 10; sudo docker node promote $HNupg<br><br>This command forces the Docker Swarm to demote and then re-elect the LEADER node back.</p>
<p>Now verify, if you are able to login to NPS-D Web console.</p>
</body>
</html>